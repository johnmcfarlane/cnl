dist: xenial
sudo: required

language: cpp
cache: ccache

matrix:
  include:
    # C++11
    - os: linux
      env: IMAGE=gcc-8 BUILD_TYPE=Debug STD=11 EXCEPTIONS=OFF INT128=ON SANITIZE=OFF GENERATOR=Ninja

    - os: linux
      env: IMAGE=gcc-7 BUILD_TYPE=Release STD=11 EXCEPTIONS=ON INT128=ON SANITIZE=OFF GENERATOR=Ninja

    - os: osx
      osx_image: xcode8.3
      env: PACKAGE=gcc@7 C_COMPILER=gcc-7 CXX_COMPILER=g++-7 BUILD_TYPE=Release STD=11 EXCEPTIONS=ON INT128=ON SANITIZE=OFF GENERATOR="Unix Makefiles"

    - os: linux
      env: IMAGE=gcc-6 BUILD_TYPE=Debug STD=11 EXCEPTIONS=OFF INT128=ON SANITIZE=ON GENERATOR=Ninja

    - os: linux
      env: IMAGE=gcc-5 BUILD_TYPE=Release STD=11 EXCEPTIONS=ON INT128=ON SANITIZE=ON GENERATOR="Unix Makefiles"

    - os: linux
      env: IMAGE=clang-6.0 BUILD_TYPE=Debug STD=11 EXCEPTIONS=ON INT128=OFF SANITIZE=OFF GENERATOR="Ninja"

    - os: linux
      env: IMAGE=clang-5.0 BUILD_TYPE=Debug STD=11 EXCEPTIONS=ON INT128=OFF SANITIZE=OFF GENERATOR="Unix Makefiles"

    - os: linux
      env: IMAGE=clang-4.0 BUILD_TYPE=Release STD=11 EXCEPTIONS=OFF INT128=ON SANITIZE=OFF GENERATOR=Ninja

    - os: linux
      env: IMAGE=clang-3.9 BUILD_TYPE=Debug STD=11 EXCEPTIONS=ON INT128=ON SANITIZE=ON GENERATOR=Ninja

    - os: linux
      env: IMAGE=clang-3.8 BUILD_TYPE=Release STD=11 EXCEPTIONS=ON INT128=ON SANITIZE=ON GENERATOR="Unix Makefiles"

    # C++14
    - os: linux
      env: IMAGE=gcc-8 BUILD_TYPE=Release STD=14 EXCEPTIONS=OFF INT128=OFF SANITIZE=OFF GENERATOR="Unix Makefiles"

    - os: linux
      env: IMAGE=gcc-7 BUILD_TYPE=Debug STD=14 EXCEPTIONS=ON INT128=OFF SANITIZE=OFF GENERATOR="Unix Makefiles"

    - os: linux
      env: IMAGE=gcc-5 BUILD_TYPE=Debug STD=14 EXCEPTIONS=OFF INT128=ON SANITIZE=ON GENERATOR=Ninja

    - os: linux
      env: IMAGE=clang-6.0 BUILD_TYPE=Release STD=14 EXCEPTIONS=ON INT128=OFF SANITIZE=OFF GENERATOR=Ninja

    - os: linux
      env: IMAGE=clang-5.0 BUILD_TYPE=Release STD=14 EXCEPTIONS=ON INT128=ON SANITIZE=OFF GENERATOR=Ninja

    - os: linux
      env: IMAGE=clang-4.0 BUILD_TYPE=Debug STD=14 EXCEPTIONS=ON INT128=ON SANITIZE=OFF GENERATOR="Unix Makefiles"

    - os: linux
      env: IMAGE=clang-3.9 BUILD_TYPE=Release STD=14 EXCEPTIONS=OFF INT128=OFF SANITIZE=ON GENERATOR="Unix Makefiles"

    - os: osx
      compiler: clang # clang-3.8
      env: C_COMPILER=clang CXX_COMPILER=clang++ BUILD_TYPE=Release STD=14 EXCEPTIONS=ON INT128=ON SANITIZE=OFF GENERATOR="Unix Makefiles"

    - os: linux
      env: IMAGE=clang-3.8 BUILD_TYPE=Release STD=14 EXCEPTIONS=ON INT128=ON SANITIZE=ON GENERATOR="Unix Makefiles"

    # C++17
    - os: linux
      env: IMAGE=gcc-8 BUILD_TYPE=Release STD=17 EXCEPTIONS=ON INT128=OFF SANITIZE=OFF GENERATOR="Ninja"

    - os: linux
      env: IMAGE=gcc-7 BUILD_TYPE=Release STD=17 EXCEPTIONS=ON INT128=ON SANITIZE=OFF GENERATOR=Ninja

    - os: osx
      osx_image: xcode9
      env: PACKAGE=gcc6 C_COMPILER=gcc-6 CXX_COMPILER=g++-6 BUILD_TYPE=Release STD=17 EXCEPTIONS=ON INT128=ON SANITIZE=OFF GENERATOR="Unix Makefiles"

    - os: linux
      env: IMAGE=gcc-6 BUILD_TYPE=Debug STD=17 EXCEPTIONS=ON INT128=ON SANITIZE=ON GENERATOR=Ninja

    - os: linux
      env: IMAGE=gcc-5 BUILD_TYPE=Debug STD=17 EXCEPTIONS=OFF INT128=ON SANITIZE=ON GENERATOR=Ninja

    - os: linux
      env: IMAGE=clang-5.0 BUILD_TYPE=Release STD=17 EXCEPTIONS=OFF INT128=ON SANITIZE=OFF GENERATOR=Ninja

script:
  - .travis/test-${TRAVIS_OS_NAME}.sh
